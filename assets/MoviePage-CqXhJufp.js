import{u as O,r as t,a as b,b as P,j as e,S as A,c as F,M as J,T as $,F as Q,d as U}from"./index-CHQf8ZiF.js";const I="https://api.themoviedb.org/3",B="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjMDU0N2Q5ZmZiMTg1ZTk3MTc5YzI5OWUxNmIxZTQwNSIsIm5iZiI6MTc1MDI0MzA4OC43NDUsInN1YiI6IjY4NTI5NzEwNThkNzhhZThiNzU4MzQ0YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.MtIRxaHQsR93Ec3E-NKehDwlNh4XBdBx1QlYL5fm0Ig",S={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${B}`}},G=()=>{var j,N,w;const{slug:E}=O(),[s,M]=t.useState(null),[k,y]=t.useState(!0),u=b(),T=b(),[R,p]=t.useState(!1),[g,_]=t.useState(""),[C,l]=t.useState([]),[z,x]=t.useState(!1),[v,d]=t.useState(""),[L,h]=t.useState(!1),m=t.useRef(null),i=P(g,1e3),Z=async(a,r=1)=>{x(!0),d("");try{const o=`${I}/search/movie?query=${encodeURIComponent(a)}&page=${r}`,c=await fetch(o,S);if(!c.ok)throw new Error("Failed to fetch search results");const n=await c.json();if(n.Response==="False"){d(n.Error||"No results found"),l([]);return}l(n.results||[]),a&&n.results.length>0&&await U(a,n.results[0])}catch(o){d("Error Fetching Search Results: "+o)}finally{x(!1)}};t.useEffect(()=>{i?Z(i):l([])},[i]),t.useEffect(()=>{const a=r=>{m.current&&!m.current.contains(r.target)&&h(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const f=E.split("-").pop();if(t.useEffect(()=>{(async()=>{try{const r=`${I}/movie/${f}?`,c=await(await fetch(r,S)).json();M(c)}catch(r){console.error("Error fetching movie details:",r),u("/404-Error")}finally{y(!1)}})()},[f]),k)return e.jsx("div",{className:"fixed inset-0 bg-dark-100 flex items-center justify-center z-99",children:e.jsx(A,{})});if(!s)return u("/404-Error");const D=()=>T("/");return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"footer.png",alt:"",className:"z-0 hidden sm:block absolute bottom-0 w-full"}),e.jsxs("div",{className:"movie fade-in",children:[e.jsx("nav",{className:"nav",children:e.jsxs("div",{className:"nav-bar",children:[e.jsx("h1",{className:"nav-text",onClick:D,children:"EZ Movies"}),e.jsxs("div",{className:"relative",ref:m,children:[e.jsx(F,{searchTerm:g,setSearchTerm:_,className:"search-nav",onFocus:()=>h(!0)}),i&&L&&e.jsx("section",{onClick:()=>h(!1),className:"fade-in absolute top-12 right-0 z-20 w-[100vw] sm:w-md transition3s mx-auto rounded-lg bg-dark-100",children:z?e.jsx("p",{className:"text-gray-100 text-center",children:"Loading..."}):v?e.jsx("p",{className:"text-red-500",children:v}):e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"animate-slide-up grid grid-cols-1 max-h-120 overflow-y-scroll pb-10",children:C.map(a=>e.jsx(J,{movie:a,className:"search-card-nav"},a.id))}),e.jsx("div",{className:" bg-dark-200 flex absolute bottom-0 left-0 right-0 justify-center items-center h-10 rounded-lg",children:e.jsx("p",{className:" text-white hover:underline",children:"Show All Results"})})]})})]})]})}),e.jsx("div",{className:"backdrop animate-slide-up",onClick:()=>p(!0),children:R?e.jsx("div",{className:"player",children:e.jsx("iframe",{className:"iframe",src:`https://vidsrc.me/embed/movie?tmdb=${s.id}`,referrerPolicy:"origin",allowFullScreen:!0})}):e.jsxs(e.Fragment,{children:[e.jsx("img",{className:"backdrop-img",src:s.backdrop_path?`https://image.tmdb.org/t/p/w500/${s.backdrop_path}`:"no-movie.png",alt:s.title}),e.jsx("svg",{className:"play-icon",onClick:()=>p(!0),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm14.024-.983a1.125 1.125 0 0 1 0 1.966l-5.603 3.113A1.125 1.125 0 0 1 9 15.113V8.887c0-.857.921-1.4 1.671-.983l5.603 3.113Z",clipRule:"evenodd"})})]})}),e.jsxs("div",{className:"poster-and-info animate-slide-up",children:[e.jsx("div",{className:"poster",children:e.jsx("img",{className:"poster-img",src:s.poster_path?`https://image.tmdb.org/t/p/w500/${s.poster_path}`:"no-movie.png",alt:s.title})}),e.jsxs("div",{className:"movie-info",children:[e.jsx("h2",{className:"mb-3",children:s.title}),e.jsx("p",{className:"mb-3 overflow-y-scroll",children:s.overview}),e.jsxs("p",{children:[e.jsx("strong",{children:"Release Date :"})," ",s.release_date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating :"})," ",((j=s.vote_average)==null?void 0:j.toFixed(1))||"N/A","/10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Language :"})," ",s.original_language==="en"?"English":((w=(N=s.spoken_languages)==null?void 0:N[0])==null?void 0:w.english_name)||s.original_language]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Genre :"})," ",s.genres.map((a,r)=>e.jsxs("span",{children:[a.name,r<s.genres.length-1?", ":""]},r))]})]})]}),e.jsx($,{scrollOnClick:!0}),e.jsx(Q,{})]})]})};export{G as default};
